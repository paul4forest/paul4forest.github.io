<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Paul Rougieux</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-wrench"></span>
     
    Tools
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="bash.html">Bash</a>
    </li>
    <li>
      <a href="debian.html">Debian</a>
    </li>
    <li>
      <a href="docker.html">Docker</a>
    </li>
    <li>
      <a href="git.html">Git</a>
    </li>
    <li>
      <a href="lyx.html">Lyx</a>
    </li>
    <li>
      <a href="mysql.html">MySQL</a>
    </li>
    <li>
      <a href="python.html">Python</a>
    </li>
    <li>
      <a href="R.html">R</a>
    </li>
    <li>
      <a href="vim.html">Vim</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-database"></span>
     
    Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="datasources.html">Sources</a>
    </li>
    <li>
      <a href="explore.html">Explore</a>
    </li>
  </ul>
</li>
<li>
  <a href="events.html">
    <span class="fa fa-users"></span>
     
    Events
  </a>
</li>
<li>
  <a href="publications.html">
    <span class="fa fa-book"></span>
     
    Publications
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p>:– title: “Bash Commands” output: html_document: toc: yes toc_float: true —</p>
<pre class="r"><code>knitr::opts_chunk$set(eval=FALSE)</code></pre>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This page is the continuation of <a href="https://paulremote.blogspot.de/2014/01/linux-shell-commands.html">my blog post on GNU-Linux bash shell commands</a>.</p>
<p>Linux is the kernel of the operating system on top of which other programs are built. A detailed list of GNU core utilities is available under the command :</p>
<pre><code>info coreutils </code></pre>
<p>The page below also contains many commands from external tools that are not part of the GNU project.</p>
</div>
<div id="find" class="section level1">
<h1>Find</h1>
<div id="find-files" class="section level2">
<h2>Find files</h2>
<p>Find files in subdirectories of the current directory (Quotes are requited to prevent shell command expansion).</p>
<pre><code>find . -name &quot;*.pdf&quot; 

find . -mtime 0 # modified in the last 24 hours</code></pre>
<p>Find files in the whole system</p>
<pre><code>locate filename</code></pre>
</div>
<div id="get-information-about-a-file" class="section level2">
<h2>Get information about a file</h2>
<p>Determine file type and encoding. The -i option shows the mime type strings.</p>
<pre><code>file filename
file -i filename</code></pre>
<p>list a directory</p>
<pre class="bash"><code>ls
ls -R # list subdirectories recursively
ls -lh # sizes in human readable format</code></pre>
<p>Display the <a href="https://stackoverflow.com/questions/16391208/print-a-files-last-modified-date-in-bash">last modification date of a file</a></p>
<pre><code>date -r &lt;filename&gt;
ls -l &lt;filename&gt;</code></pre>
<p>More file information</p>
<pre><code>stat &lt;filename&gt;</code></pre>
</div>
<div id="search-and-filter-text-files" class="section level2">
<h2>Search and filter text files</h2>
<p>Search with Grep</p>
<pre><code>grep &quot;text&quot; file.txt</code></pre>
<p>Recursive search (-r) in all files in the directory for a given pattern, case insensitive (-i)</p>
<pre><code>grep -ri &quot;pattern&quot; .</code></pre>
<p>Give 1 line of context before and 2 lines of context after:</p>
<pre><code>grep -B 1 -A 2 pattern README.md</code></pre>
<p>Show all csv files mentionned in a source code (supposing the csv file name contain only alphanumeric characters). Use Extended regular expression (-E) to search for alphanumeric characters, only show the matching result (-o), not the full line and show the line number (-n) where the string occurs:</p>
<pre><code>grep -Eon &quot;[[:alnum:]]+.csv&quot; file.txt</code></pre>
<p>Count occurrences of a word in a file</p>
<pre><code>grep -roh word filename.txt  | wc -w</code></pre>
<p><a href="http://www.grymoire.com/Unix/Awk.html#uh-11">Awk tutorial</a>, for example filter a large file for lines that have a third field (product code) starting with 44, keep the header line:</p>
<pre><code>awk -F, &#39;$3 ~ /^44/||NR==1&#39; nc201501.dat|less</code></pre>
<p>Regexp match begining of and end of line with ^ and $.</p>
<p>Follow the end of a log file as it is written</p>
<pre><code>tail -f</code></pre>
<p>See tab and end of line characters in a text file</p>
<pre><code>cat -te filename |less </code></pre>
</div>
<div id="count-the-number-of-lines-in-a-text-file" class="section level2">
<h2>Count the number of lines in a text file</h2>
<p>Count the number of lines in a file</p>
<pre><code>wc -l filename.txt </code></pre>
<p>Count the number of lines in all files, and give the total line count.</p>
<pre><code>find . -name &#39;*.py&#39; | xargs wc -l # python code
find . -name &#39;*.R&#39; | xargs wc -l # R code</code></pre>
</div>
</div>
<div id="read" class="section level1">
<h1>Read</h1>
<div id="play-midi-files" class="section level2">
<h2>Play Midi files</h2>
<p>Install a software synthethizer to play midi files. <a href="https://wiki.videolan.org/Midi/">VideoLan Wiki</a></p>
<blockquote>
<p>If the FluidSynth codec is not shown in VLC’s preferences, you have to install it as well as sound fonts. E.g. on Ubuntu 14.04 and derivatives it is in the vlc-plugin-fluidsynth package, while the fluid-soundfont-gs and fluid-soundfont-gm packages install some sound</p>
</blockquote>
</div>
</div>
<div id="edit" class="section level1">
<h1>Edit</h1>
<div id="edit-image-files" class="section level2">
<h2>Edit Image files</h2>
<p>Resize a picture to 2000 px wide using ImageMagick:</p>
<pre><code>convert picture1.jpg -resize 2000 picture2.jpg </code></pre>
<p>Batch processing, resize all jpg images and place the resized images in a new folder</p>
<pre><code>mkdir newfolder
mogrify -resize 2000 -path ./newfolder *.jpg</code></pre>
</div>
<div id="edit-pdf-files" class="section level2">
<h2>Edit PDF files</h2>
<p>Commands based on the poppler library for PDF manipulation. Search a text pattern in all PDF files present in a directory:</p>
<pre><code>pdfgrep pattern *.pdf</code></pre>
<p>Merge multiple PDF into one:</p>
<pre><code>pdfunite in-1.pdf in-2.pdf in-n.pdf out.pdf</code></pre>
<p>Alternatively, pdftk can be used to merge PDF files</p>
<pre><code>pdftk input1.pdf input2.pdf cat output output.pdf</code></pre>
<p><a href="https://askubuntu.com/a/282455/315347">Extract pages from a pdf</a></p>
<pre><code>pdftk full-pdf.pdf cat 12-15 output outfile_p12-15.pdf.</code></pre>
<p>Split a pdf in two</p>
<pre><code>mutool poster -x 2 cbmflow.pdf output.pdf
# if necessary, install mutool with 
apt install mupdf-tools</code></pre>
</div>
<div id="replace-strings-in-text-files" class="section level2">
<h2>Replace strings in text files</h2>
<p>Replace strings</p>
<pre><code>first=&quot;I love Suzy and Mary&quot;
second=&quot;Sara&quot;
first=${first/Suzy/$second}</code></pre>
<p>Replace strings with sed</p>
<pre><code>sed -i  &#39;s/pattern/replacement/g&#39; bli.txt 

sed -i  &#39;s/^.*\://g&#39; input_file.txt # edit file in place
grep EMAIL input_file.txt |sed  &#39;s/^.*\://g&#39; &gt; output_file.txt </code></pre>
<p>Add a line above and below a line that contains a particular string. This was necessary for a Latex to Lyx document conversion. The Latex file had problematic characters in href links. Conversion worked fine without the href links, to keep the links</p>
<p>I quoted them in \begin{verbatim} statements. <a href="https://stackoverflow.com/a/24230154/2641825">sed add # before a line containing a pattern</a> <a href="https://unix.stackexchange.com/questions/97428/sed-how-to-do-several-consecutive-substitutions-but-process-file-only-once">sed performing several substitutions</a></p>
<pre><code># Test output to stdout placing # before and after a matching line
sed -e /href/s/^/\\n#\\n/ -e /href/s/$/\\n#\\n/ clipboard_3_to_delete.tex| grep -C2 href 
 # Modify the file in place</code></pre>
<div id="refactor" class="section level3">
<h3>Refactor</h3>
<p>Replace strings with perl in a git repository. The examples below replace all occurences of the first string with the second string, for all files under git version control.</p>
<pre><code>git grep -lz &#39;first_string&#39;| xargs -0 perl -i&#39;&#39; -pE &quot;s/first_string/second_string/g&quot;
git grep -lz &#39;readcsvfromgauss&#39;| xargs -0 perl -i&#39;&#39; -pE &quot;s/readcsvfromgauss/readcsvfromgauss0/g&quot;
git grep -lz &#39;RMySQL::&#39;| xargs -0 perl -i&#39;&#39; -pE &quot;s/RMySQL::/RMariaDB::/g&quot;</code></pre>
<p>Remove duplicated lines from a file</p>
<pre><code>awk &#39;!a[$0]++&#39; input.txt </code></pre>
</div>
</div>
</div>
<div id="organise" class="section level1">
<h1>Organise</h1>
<div id="compress-one-file" class="section level2">
<h2>Compress one file</h2>
<p>Compress a file using gzip or 7z compression</p>
<pre><code>gzip &lt;filename&gt;
7zr a -si&lt;filename&gt; &lt;filename&gt;.7z </code></pre>
<p>Decompress a single file from several archive formats:</p>
<pre><code>bzip2 -d &lt;filename.bz2&gt;
gunzip &lt;filename.gz&gt;
7zr e &lt;filename.7z&gt; # extract all files in the same directory 
7zr x &lt;filename.7z&gt; # keep directory structure (see also multiple files below)</code></pre>
<p>Convert a 7z file to gz using a pipe similar to <a href="https://superuser.com/a/357980/419414">this answer</a>.</p>
<pre><code>7zr e -so &lt;filename.7z&gt; | gzip -c &gt; &lt;filename.gz&gt;</code></pre>
</div>
<div id="compress-multiple-files" class="section level2">
<h2>Compress multiple files</h2>
<p>How do I compress a whole directory?</p>
<pre><code>tar -zcvf archive-name.tar.gz directory-name </code></pre>
<p>Where</p>
<pre><code>-z: Compress archive using gzip program
-c: Create archive
-v: Verbose i.e display progress while creating archive
-f: Archive File name</code></pre>
<p>Decompress an archive containing multiple files Keep full path of files within the archive To extract content from the archive in the current directory</p>
<pre><code>tar -zxvf archive-name.tar.gz 
7zr x &lt;filename.7z&gt;  </code></pre>
<p>List content of an archive</p>
<pre><code>7zr l &lt;filename.7z&gt;</code></pre>
</div>
<div id="move-and-copy-files" class="section level2">
<h2>Move and copy files</h2>
<p>Copy a file</p>
<pre><code>cp file1 file2</code></pre>
<p><a href="https://unix.stackexchange.com/questions/83593/copy-specific-file-type-keeping-the-folder-structure">Recursive copy some files while keeping the directory structure</a></p>
<pre><code>find . -name &#39;*.csv&#39; -exec cp --parents \{\} /target \;</code></pre>
</div>
<div id="rename-files" class="section level2">
<h2>Rename files</h2>
<p>For example to rename all upper-case .JPG extension into lower-case .jpg extension.</p>
<pre><code>rename &#39;s/\.JPG$/\.jpg/&#39; *.JPG</code></pre>
</div>
</div>
<div id="convert" class="section level1">
<h1>Convert</h1>
<div id="pandoc" class="section level2">
<h2>Pandoc</h2>
<p><a href="https://pandoc.org/demos.html">Pandoc demos</a> contains a lot of example commands to convert text files from one format to another.</p>
<p>Convert an odf document to markdown</p>
<pre><code>pandoc filename.odt -o filename.md </code></pre>
<p>Convert a Microsoft Word document to markdown</p>
<pre><code>pandoc filename.docx -o filename.md </code></pre>
<p><a href="https://pandoc.org/MANUAL.html#headers">Markdown has two different header styles</a> Use ATX style headers in markdown output. The default is to use setext-style headers for levels 1-2, and then ATX headers.</p>
<pre><code>pandoc --atx-headers filename.docx -o filename.md </code></pre>
</div>
</div>
<div id="download" class="section level1">
<h1>Download</h1>
<div id="download-with-curl" class="section level2">
<h2>Download with Curl</h2>
<p>Load a file from a URL, using the file name from the URL</p>
<pre><code>curl -O &lt;url_including_a_file_name&gt;</code></pre>
</div>
<div id="download-videos-and-audio" class="section level2">
<h2>Download videos and audio</h2>
<p>Install youtube-dl using pip:</p>
<pre><code> sudo pip install --upgrade youtube_dl</code></pre>
<p>Download a video from youtube :</p>
<pre><code>youtube-dl video_url</code></pre>
<p>Download only the audio in an OGG Vorbis format</p>
<pre><code>youtube-dl --extract-audio --audio-format vorbis video_url</code></pre>
<p>Download only the audio in an .mp3 format</p>
<pre><code>youtube-dl --extract-audio --audio-format mp3 video_url</code></pre>
<p>Create bash aliases to download various audio formats from youtube</p>
<pre><code>alias youtubevorbis=&quot;youtube-dl --extract-audio --audio-format vorbis&quot;
alias youtubemp3=&quot;youtube-dl --extract-audio --audio-format mp3&quot;</code></pre>
</div>
</div>
<div id="users" class="section level1">
<h1>Users</h1>
<div id="manager-users-and-groups" class="section level2">
<h2>Manager users and groups</h2>
<p>Check your user id</p>
<pre><code>id 
echo $UID
echo $USER</code></pre>
<p>What group do you belong to as a user</p>
<pre><code>groups</code></pre>
<p>Add a new user</p>
<pre><code>useradd username</code></pre>
<p>Set a password for the new user</p>
<pre><code>passwd username </code></pre>
<p>Delete a user</p>
<pre><code>userdel username</code></pre>
<p>Temporary log in as a given user</p>
<pre><code>su username</code></pre>
<p>Add a user to the super users</p>
<pre><code>adduser username sudo</code></pre>
<p>That user needs to re-log into the shell for the change to take effect.</p>
<p>Show all users</p>
<pre><code>getent passwd</code></pre>
<p>Show all groups</p>
<pre><code>getent group </code></pre>
</div>
<div id="change-file-permission" class="section level2">
<h2>Change file permission</h2>
<p>Change user and group of a file</p>
<pre><code>chown groupname:username filename</code></pre>
<p>Change file permission</p>
<pre><code>chmod a=rwx filename
chmod 777 filename </code></pre>
<p>Change file permissions recursively:</p>
<pre><code>chmod 755 directoryname</code></pre>
<p>Chmod instructions can be given with characters or numbers, chmod 777 or chmod a=rwx is a question of preference.</p>
<pre><code>Some prefer 755 over 777 because giving write access to group and other users could be a security risk. 755 leaves read and execute rights to groups and other users. 755 is visible as &quot;rwxr-xr-x&quot; in ls -l. 
The default for document files on Debian seems to be chmod 644, visible as &quot;-rw-r--r--&quot; in ls -l.</code></pre>
</div>
<div id="alias" class="section level2">
<h2>Alias</h2>
<pre><code>alias ll=&quot;ls -lh&quot; </code></pre>
<p>Based on how can i sort du-h output by size</p>
<pre><code>alias du=&#39;du -hd1 | sort -h -r&#39;</code></pre>
<p>You can place those commands in your ~/.bashrc to create a permanent alias. bashrc:</p>
<blockquote>
<p>“You may want to put all your additions into a separate file like ~/.bash_aliases, instead of adding them here directly.”</p>
</blockquote>
</div>
<div id="profile-.bash_profile-and-.bashrc" class="section level2">
<h2>Profile .bash_profile and .bashrc</h2>
<p>These are places where a user can turn of the system BEEP :</p>
<pre><code>setterm -blength 0</code></pre>
<p>.bash_profile is executed on login shell, when you login in another tty or when you access a system through ssh. .bashrc is executed on non-login shells when you open a terminal window in Gnome.</p>
<p>Debian Dotfiles</p>
<pre><code>&quot;Now, since bash is being invoked as a login shell (with name &quot;-bash&quot;, a special ancient hack), it reads /etc/profile first. Then it looks in your home directory for .bash_profile, and if it finds it, it reads that.&quot;

[...] &quot;You may have noted that .bashrc is not being read in this situation. You should therefore always have command source ~/.bashrc at the end of your .bash_profile in order to force it to be read by a login shell.  &quot;</code></pre>
<p>In .bashrc a user can set environment variables, define alias (see above).</p>
</div>
</div>
<div id="system" class="section level1">
<h1>System</h1>
<p>OS release</p>
<pre><code>less /etc/os-release </code></pre>
<p>Disk usage</p>
<pre><code>du -hd1  # sub-folder size at depth=1 
du -hs * # sub-folder size summary</code></pre>
<p>Display available space on drives</p>
<pre><code>df -h</code></pre>
<p>Display available RAM memory</p>
<pre><code>less /proc/meminfo</code></pre>
<p>Install a program</p>
<pre><code>sudo apt-get install </code></pre>
<p>System name</p>
<pre><code>uname -a

file /sbin/init

hostname -f </code></pre>
<p>Start and quit a super user session</p>
<pre><code>su
exit </code></pre>
<p>Last time the system was started</p>
<pre><code>last reboot 
last</code></pre>
<p>Show environment variables</p>
<pre><code>printenv 
printenv LC_TIME</code></pre>
<div id="partition-disks" class="section level2">
<h2>Partition disks</h2>
<p>Format a USB drive as a FAT 32 partition.</p>
<pre><code>sudo fdisk -l 
sudo umount /dev/mmcblk0p1 
sudo mkdosfs -F 32 -I /dev/mmcblk0</code></pre>
<p>format a USB drive as a FAT 32 partition smaller than the drive size</p>
<pre><code>sudo mkdosfs -I -F 32 /dev/mmcblk0 $((2*1024*1024))</code></pre>
<p>I used the GUI tool Gparted. To see if a partition is primary, use the command: sudo parted /dev/mmcblk0 # then: print</p>
<p>This will print the type (primary or logical) of the partition.</p>
</div>
<div id="keyboard" class="section level2">
<h2>Keyboard</h2>
<p>bash french blogger recommended a simple shell command to change keyboard layout :</p>
<pre><code>sudo loadkeys fr</code></pre>
<p>fr-keyboard on Debian wiki for a more permanent system configuration and use in GUI apps. Switching between keyboads can then be done with:</p>
<pre><code>setxkbmap de
setxkbmap fr</code></pre>
<p>Information about the system Debian-Admin Finding out basic information about your Hardware:</p>
<pre><code>cat /proc/meminfo
cat /proc/cpuinfo</code></pre>
<p>Find your Debian version</p>
<pre><code>cat /etc/debian_version
lsb_release -a</code></pre>
<p>Shortcuts Keyboard shortcuts for bash for example :</p>
<ul>
<li>Ctrl+A to go to the beginning of a line</li>
<li>Ctrl+E to go to the end of a line</li>
</ul>
<p>Documentation</p>
<pre><code>Creating and running bash scripts
Unofficial Ubuntu starter guide.</code></pre>
</div>
<div id="locale" class="section level2">
<h2>Locale</h2>
<p><a href="https://wiki.debian.org/Locale">Debian wiki page on Locale settings</a></p>
<p>Display locale settings</p>
<pre><code>locale</code></pre>
<p>To install new locales, run :</p>
<pre><code>sudo dpkg-reconfigure locales</code></pre>
<p>SSH forwards locales to the server. The server will try to use thegiven locale, but it might not have them installed. <a href="https://askubuntu.com/questions/144235/locale-variables-have-no-effect-in-remote-shell-perl-warning-setting-locale-f/144448#144448">Locale variables have no effect in remote shell</a></p>
<p><a href="https://askubuntu.com/questions/76013/how-do-i-add-locale-to-ubuntu-server">How do I add a locale to a Ubuntu Server?</a> Check which locales are supported:</p>
<pre><code>locale -a</code></pre>
<p>add the locales you want (for example ru):</p>
<pre><code>sudo locale-gen ru_RU
sudo locale-gen ru_RU.UTF-8</code></pre>
<p>run this update comand</p>
<pre><code>sudo update-locale </code></pre>
</div>
<div id="partitioning-and-formatting-drives" class="section level2">
<h2>Partitioning and formatting drives</h2>
<p>Manipulate the disk partition table <a href="https://ubuntuforums.org/archive/index.php/t-2030703.html">See forum post July 21st, 2012, 09:08 AM</a></p>
<pre><code>sudo fdisk /dev/sdb
d # delete
w # write table to disk
sudo fdisk /dev/sdb
n # create a new partition
# yes to all default choices
w # write table to disk</code></pre>
<p>Create a MS-DOS file system for USB drives</p>
<pre><code>mkfs.vfat -n &#39;usb_drive_name&#39; -I /dev/sdb1</code></pre>
<p>You can also use the GUI gparted.</p>
</div>
<div id="monitoring" class="section level2">
<h2>Monitoring</h2>
<p>Display Linux processes</p>
<pre><code>top</code></pre>
<p>Interactive process viewer</p>
<pre><code>htop</code></pre>
<p>Run a command every 2 seconds, for example to list a folder as new files are beeing written to it:</p>
<pre><code>watch ls</code></pre>
<p>Follow the end of a log file, as it is written</p>
<pre><code>tail filename.log</code></pre>
<p>Find out which program is listening to which port</p>
<pre><code>sudo netstat -pna | grep &lt;port_number&gt;</code></pre>
</div>
<div id="job-handling" class="section level2">
<h2>Job handling</h2>
<p>List</p>
<pre><code>jobs</code></pre>
<p>Bring a job to the foreground</p>
<pre><code>fg job_number</code></pre>
<p>Run a job in the background. A command followed by an &amp; will run in the background.</p>
<p>Stop a job</p>
<pre><code>CTRL ^ Z</code></pre>
<p>Move a stopped job to the background</p>
<pre><code>bg</code></pre>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-use-bash-s-job-control-to-manage-foreground-and-background-processes">How to manage foreground and background processes</a> “By default, the bg command operates on the most recently stopped process. If you’ve stopped multiple “</p>
<p>Quit a job</p>
<pre><code> CTRL ^ C</code></pre>
<p>Kill a malfunctionning program:</p>
<pre><code>kill process_id
kill -9 process_it # -9 forces the kill</code></pre>
<p>Find a program id with:</p>
<pre><code>ps aux</code></pre>
<p>Kill a graphical program, by clicking on it:</p>
<pre><code> xkill</code></pre>
</div>
</div>
<div id="bash-programming" class="section level1">
<h1>Bash Programming</h1>
<div id="variables" class="section level2">
<h2>Variables</h2>
<p><a href="https://www.shellscript.sh/variables1.html">Variables</a></p>
<pre><code>message = &quot;Hello World&quot;
echo $message</code></pre>
</div>
<div id="wildcards" class="section level2">
<h2>Wildcards</h2>
<p>Search for a pattern in python and R files:</p>
<pre><code>grep -n &lt;pattern&gt; *{py,R}</code></pre>
</div>
</div>
<div id="authentification-and-security" class="section level1">
<h1>Authentification and security</h1>
<div id="generate-ssh-keys-to-access-a-remote-git-repository" class="section level2">
<h2>Generate SSH keys to access a remote git repository</h2>
<p>Generate a new key</p>
<pre><code>cd ~/.ssh
ssh-keygen &lt;id_rsa_keyname&gt;</code></pre>
<p>Temporarily add a key to ssh</p>
<pre><code>ssh-add ~/.ssh/&lt;id_rsa_keyname&gt;</code></pre>
<p>List keys</p>
<pre><code>ssh-add -l</code></pre>
<p>After a restart of the ssh agent</p>
<pre><code>killall ssh-agent
eval `ssh-agent`</code></pre>
<p>This key will not be available anymore to <a href="https://stackoverflow.com/a/4246809/2641825">permanently add a key to the ssh config file</a> (SO) Edit your <code>~/.ssh/config</code> file:</p>
<pre><code>IdentityFile ~/.ssh/&lt;id_rsa_keyname&gt;</code></pre>
<p>If the key was generated with a password,and you don’t exactly remember the password, you can <a href="https://stackoverflow.com/a/23666831/2641825">test a few password you might remember with</a>:</p>
<pre><code>ssh-keygen -y -f &lt;private_key_file_name&gt;</code></pre>
</div>
<div id="check-a-keys-fingerprint" class="section level2">
<h2>Check a key’s fingerprint</h2>
<p>On github, ssh key fingerprints are displayed in md5format. To display the fingerprint in md5format, enter:</p>
<pre><code>ssh-keygen -l -E md5 -f ~/.ssh/id_rsa.pub</code></pre>
<p><a href="https://superuser.com/questions/421997/what-is-a-ssh-key-fingerprint-and-how-is-it-generated">How to generate an SSH key fingerprint</a></p>
</div>
<div id="secure-shell-and-secure-copy" class="section level2">
<h2>Secure shell and secure copy</h2>
<p>log into a remote machine</p>
<pre><code>ssh user@remote_machine</code></pre>
<p>Copy a local file to a file on the remote machine</p>
<pre><code>scp local_file_name user@remote_machine:path_to_file/file_name</code></pre>
<p>Copy a file from the remote machine to a local file</p>
<pre><code>scp user@remote_machine:path_to_file/file_name  local_file_name</code></pre>
<p>Copy a full directory (dmouraty) from the remote machine:</p>
<pre><code> scp -rp user@dest:/path destdirectory</code></pre>
</div>
<div id="gpg-signing-keys" class="section level2">
<h2>GPG signing keys</h2>
<p>Generate a pgp key</p>
<pre><code>gpg --gen-key</code></pre>
<p>To submit your key to a server, export the key</p>
<pre><code>gpg -a --export name@emailserver.com &gt; public_key_sender.asc </code></pre>
<p>My keys are visible on pgp.mit.edu <a href="https://pgp.mit.edu/pks/lookup?search=rougieux&amp;op=index">search=rougieux</a></p>
</div>
</div>
<div id="networking" class="section level1">
<h1>Networking</h1>
<p>Check open ports on a system</p>
<pre><code>nmap -Pn &lt;hostname or IP address&gt;</code></pre>
</div>
<div id="terminal-multiplexers" class="section level1">
<h1>Terminal multiplexers</h1>
<p>Superuser.com <a href="https://superuser.com/questions/236158/tmux-vs-screen">tmux or screen</a></p>
<div id="screen" class="section level2">
<h2>Screen</h2>
<p>I used screen to detatch and re-attach bash sessions on remote hosts. This enabled me to run long algorithms on the remote host. I could disconnect in the evening from the ssh session and reconnect the following morning to check if the algorithm had finnished running. The advantage of screen is that it is old and available on many systems.</p>
</div>
<div id="tmux" class="section level2">
<h2>Tmux</h2>
<p>Tmux is under more active development than Screen.</p>
<ul>
<li><a href="https://robots.thoughtbot.com/a-tmux-crash-course">Crash course</a></li>
<li><a href="https://gist.github.com/MohamedAlaa/2961058">shortcuts and cheatsheet</a></li>
</ul>
<div id="sessions" class="section level3">
<h3>Sessions</h3>
<p>To start and name a session:</p>
<pre><code>tmux new -s session_name</code></pre>
<p>To detach from a session:</p>
<pre><code>tmux detach (CTRL + b + d)</code></pre>
<p>To reatach to a session:</p>
<pre><code>tmux attach -t session_name</code></pre>
<p>To list current sessions:</p>
<pre><code>tmux list-sessions</code></pre>
<p>To switch to another session:</p>
<pre><code>tmux switch -t session_name</code></pre>
<p>To delete a session:</p>
<pre><code>tmux kill-session -t targetSession</code></pre>
</div>
<div id="windows-tabs" class="section level3">
<h3>Windows (tabs)</h3>
<p>Create a new windows</p>
<pre><code>tmux new-window (CTRL + b + c)</code></pre>
<p>Move to a window</p>
<pre><code>tmux select-window -t :0-9 (CTRL + b + 0-9)</code></pre>
<p>Rename the current window</p>
<pre><code>tmux rename-window (CTRL + b + ,)</code></pre>
</div>
<div id="panes-splits" class="section level3">
<h3>Panes (splits)</h3>
<p>Following commands should be prefixed by CTRL + b. Vertical split</p>
<pre><code>%</code></pre>
<p>Horizontal split</p>
<pre><code>&quot;</code></pre>
<p>Kill a pane</p>
<pre><code>x</code></pre>
<p>Display pane numbers</p>
<pre><code>q</code></pre>
<p><a href="https://unix.stackexchange.com/a/136643/85530">How to switch directly to a pane in tmux?</a>:</p>
<blockquote>
<p>“You can jump directly to a pane by typing pane’s index while it is showed by display-panes command.”</p>
</blockquote>
</div>
<div id="movements" class="section level3">
<h3>Movements</h3>
<p>to scroll inside a pane press</p>
<pre><code>CTRL + b + Page up down</code></pre>
</div>
<div id="tmux-configuration" class="section level3">
<h3>tmux configuration</h3>
<p><a href="https://stackoverflow.com/a/21033340/2641825">This answer</a> explains how to create a tmux source-file. The configuration file tells tmux to create windows and panes and to start programs in each one of them. I started to create a tmux source file to start my favorite programs: A particular setup I use forces me to start these GUI programs from a command line:</p>
<pre><code>neww
split-window -v &#39;lyx&#39;  
split-window -v &#39;jabref&#39;  
split-window -h &#39;rstudio&#39; 
new-window</code></pre>
<p>Start tmux with this configuration file:</p>
<pre><code>tmux new-session -s work &quot;tmux source-file ~/.tmux/work&quot;      </code></pre>
<p>Make it a bash alias, by adding the following line to ~/.bashrc:</p>
<pre><code>alias tmuxw=&#39;tmux new-session -s work &quot;tmux source-file ~/.tmux/work&quot;&#39;</code></pre>
<p>Reddit <a href="https://www.reddit.com/r/vim/comments/600frr/tmux_tabs_splits_workflow/">discussion on vim splits and tmux tabs</a></p>
</div>
<div id="vim-and-tmux-navigation" class="section level3">
<h3>VIM and TMUX Navigation</h3>
<ul>
<li><p><a href="https://github.com/christoomey/vim-tmux-navigator">VIM and TMUX navigator</a></p></li>
<li><p><a href="https://robots.thoughtbot.com/seamlessly-navigate-vim-and-tmux-splits">Seamlessly navigate VIM and TMUX splits</a></p></li>
</ul>
</div>
</div>
</div>
<div id="vpn" class="section level1">
<h1>VPN</h1>
<p>A VPN was usefull when: * SMS interface didn’t work on orange.fr. I could access it through a VPN server based in Paris. * FTP download site based in Canada didn’t work from Italy. A colleague could access it through a VPN server based in Canada. * SSH access to remote servers didn’t work on company wifi. I could access the machines through the VPN. VPN access also removes localisation of site searches on google and google maps.</p>
<p>Example session,from a company wifi system which is probably bloking ssh traffic. The SSH connection breaks:</p>
<pre><code>paul@debianpaul:~/repos$ ssh cbm1 
ssh_exchange_identification: Connection closed by remote host</code></pre>
<p>I start the VPN:</p>
<pre><code>paul@debianpaul:~/repos$ vpn connect
Connecting to France - Paris - 1...     100.0%                       
Connected to France - Paris - 1</code></pre>
<p>I try to reconnect to that server through SSH:</p>
<pre><code>paul@debianpaul:~/repos$ ssh cbm1 
The authenticity of host &#39;[.......eu-west-1.compute.amazonaws.com] ([__IP__])&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:PTwO1p7Q3XqPE4Gs+KH37XqH88ePDYh5bNqKXyVpGAE.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#39;[......eu-west-1.compute.amazonaws.com],[....]&#39; (ECDSA) to the list of known hosts.</code></pre>
<p>Now the connection works.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
