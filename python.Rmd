---
title: "Python Commands"
author: "Paul Rougieux"
date: "17 August 2017"
output: 
  html_document: 
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Control flow

dotnetperls: [not python](https://www.dotnetperls.com/not-python)

# Object types

`type()` displays the type of an object.

    i = 1
    print(type(i))
    # <type 'int'>
    x = 1.2
    print(type(x))
    # <type 'float'>
    t = (1,2)
    print(type(t))
    # <type 'tuple'>
    l = [1,2]
    print(type(l))
    # <type 'list'>

## List

### List of tuples

[How to flatten a list of tuples](https://stackoverflow.com/questions/10632839/transform-list-of-tuples-into-a-flat-list-or-a-matrix)

    nested_list = [(1, 2, 4), (0, 9)]

Using `reduce`:

    reduce(lambda x,y:x+y, map(list, nested_list))                                                                                                                              
    [1, 2, 4, 0, 9]

Using itertools.chain:

    import itertools
    list(itertools.chain.from_iterable(nested_list))

Using `extend`:
    
    flat_list = []
    for a_tuple in nested_list:
        flat_list.extend(list(a_tuple))                                                                                                                                     
    flat_list
    [1, 2, 4, 0, 9]


# ipython

Add these options at the ipyhton command line to reload objects automatically while you are coding

    %load_ext autoreload   
    %autoreload 2         


## Debugging in ipython


Once an error occurs at the ipython command line. 
Press `debug` then you can move up the stack trace with:

    `u`

Move down the stack trace with:

    `d` 

Show code context of the error:

    `l` 

Show available variable in the current context:

    `a` 





# Jupyter notebooks

Using the Table of Content extension
[jupyter table of content extension](https://github.com/minrk/ipython_extensions#table-of-contents)


    jupyter nbconvert --to markdown mynotebook.ipynb
    jupyter nbconvert --to html mynotebook.ipynb


## Help in a jupyter notebook 

To get help on a function, enter `function_name?` in a cell. 

# Objects

## Inheritance and composition

Example 

    ###############################################################################
    class Vehicle(object):

        def __init__(self, color, speed_max, garage=None):
            # Default attributes #
            self.color = color
            self.speed_max = speed_max
            self.garage = garage

        def paint(self, new_color):
            # Default attributes #
            self.color = new_color

        def go_back_home(self, new_color):
            # Default attributes #
            self.position = self.go_to(self.parent.location)

    ###############################################################################
    class Car(Vehicle):

        def open_door(self):
            pass

    ###############################################################################
    class Boat(Vehicle):

        def open_balast(self):
            pass

    ###############################################################################
    class Garage(object):

        def __init__(self, all_vehicles):
            self.all_vehicles = all_vehicles

        def mass_paint(self, new_color):
            # Default attributes #
            for v in self.all_vehicles: v.paint(new_color)

        def build_car(self, color):
            new_car = Car(color, 90, self)
            self.all_vehicles.append(new_car)
            return new_car

        @property
        def location(self):
            return '10, 18'

    ###############################################################################
    ###############################################################################
    ###############################################################################
    honda = Car('bleu', 60)
    gorgeoote = Boat('rouge', 30)
    honda.paint('purple')

    mike = Garage([honda, gorgeoote])

    mike.mass_paint()

    sport_car = mike.build_car('rouge')




# Pandas data frames

## Joining and merging

Stackoverflow [Pandas mergin](https://stackoverflow.com/questions/53645882/pandas-merging-101/53645883#53645883)


## Reshaping

[The Pandas user guide on reshaping](https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html#reshaping-by-melt) 
gives several example using `melt` (easier to rename the  “variable” and “value” columns) 
or `stack` (designed to work together with MultiIndex objects).


## Replacement

[Pyton pandas equivalent for replace](https://stackoverflow.com/questions/12152716/python-pandas-equivalent-for-replace)

    import pandas
    s = pandas.Series(["ape", "monkey", "seagull"])
    s.replace(["ape", "monkey"], ["lion", "panda"])
    s.replace("a", "x", regex=True)
    s.replace({"ape": "lion", "monkey": "panda"})
    pandas.Series(["bla", "bla"]).replace("a","i",regex=True)


## Selection with loc and iloc

[Select pandas data frame rows and columns using iloc and loc](https://www.shanelynn.ie/select-pandas-dataframe-rows-and-columns-using-iloc-loc-and-ix/)




## ZZ Comparison with R

 * pandas.pydata.org [Comparison with R](https://pandas.pydata.org/pandas-docs/stable/getting_started/comparison/comparison_with_r.html)
 * [Tydiverse style pandas](https://stmorse.github.io/journal/tidyverse-style-pandas.html) 
> The basic mapping of dplyr to pandas is:

    dplyr   pandas
    mutate  assign
    select  filter
    rename  rename
    filter  query
    arrange     sort_values
    group_by    groupby
    summarize   agg


# Unit tests
See [python markdown unit tests](https://github.com/okken/markdown.py/blob/master/test_markdown_unittest.py)


# String 

[SO answer ](https://stackoverflow.com/questions/25675943/how-can-i-concatenate-str-and-int-objects) 
providing various ways to concatenate python strings.


# Web Frameworks

[Flask vs. Django](asynchrosnus://www.codementor.io/garethdwyer/flask-vs-django-why-flask-might-be-better-4xs7mdf8v)

Note: [Flask Evolution into Quart](http://pgjones.gitlab.io/quart/flask_evolution.html#flask-evolution) to support asyncio


# Media

Podecast [talk python to me](https://talkpython.fm/)
 * [Data science year in review](https://talkpython.fm/episodes/show/193/data-science-year-in-review-2018-edition)


# R and python

See also the section above on pandas data frame / comparison with R. 

[Migrating from R to python](https://jrvcomputing.wordpress.com/2016/11/14/migrating-from-r-to-python/)
Python is a full fledge programming language but it is missing statistical and plotting libraries.
Vectors are an after thought in python most functionality can be reproduced using operator overloading,
but some functionality looks clumsy. 



